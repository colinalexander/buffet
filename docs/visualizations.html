<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MandateOS Visualizations</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to content</a>
    <header class="hero hero-compact">
      <img
        src="figures/banner.png"
        alt="Institutional investment judgment represented as a governed control system, with supervised procedures, explicit constraints, and auditable outcomes rather than trading activity"
      />
      <div class="hero-text">
        <div class="hero-top">
          <h1>MandateOS — Visualizations</h1>
          <nav class="nav" aria-label="Site">
            <a data-nav href="./index.html">Home</a>
            <a data-nav href="./visualizations.html">Visualizations</a>
            <a data-nav href="./glossary.html">Glossary</a>
            <a data-nav href="./download.html">Download</a>
            <a data-nav href="./faq.html">FAQ</a>
            <button id="nav-onboarding" class="nav-btn" type="button">Onboarding</button>
          </nav>
        </div>
        <p>Trends, escalation frequency, and mandate/procedure drilldowns (read-only).</p>
      </div>
    </header>

    <main id="main" class="layout viz-layout">
      <section class="panel">
        <div class="panel-header">
          <div>
            <h2>Dataset filters</h2>
            <p class="panel-subtitle"><span id="viz-count">0</span> records in scope</p>
          </div>
          <div class="panel-actions">
            <button id="viz-reset" class="btn btn-ghost" type="button">Reset</button>
          </div>
        </div>
        <div class="filters viz-filters">
          <label>
            Search
            <input id="viz-search" type="search" placeholder="mandate, procedure, record id…" />
          </label>
          <label>
            Mandate
            <select id="viz-mandate"></select>
          </label>
          <label>
            Procedure
            <select id="viz-procedure"></select>
          </label>
          <label>
            Judgment type
            <select id="viz-outcome"></select>
          </label>
          <div class="date-grid">
            <label>
              From
              <input id="viz-from" type="date" />
            </label>
            <label>
              To
              <input id="viz-to" type="date" />
            </label>
          </div>
        </div>
      </section>

      <section class="panel">
        <h2>Timeline of judgments</h2>
        <p class="preamble">Counts of outcomes over time for the filtered dataset.</p>
        <div class="chart-wrap">
          <canvas id="timeline-chart" aria-label="Judgment timeline chart" role="img"></canvas>
        </div>
      </section>

      <section class="panel viz-grid">
        <div class="viz-card">
          <h2>Escalations by mandate</h2>
          <div class="chart-wrap">
            <canvas id="escalations-mandate" aria-label="Escalations per mandate chart" role="img"></canvas>
          </div>
        </div>
        <div class="viz-card">
          <h2>Escalations by procedure</h2>
          <div class="chart-wrap">
            <canvas id="escalations-procedure" aria-label="Escalations per procedure chart" role="img"></canvas>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <div>
            <h2>Escalation heatmap</h2>
            <p class="panel-subtitle">X = procedures · Y = mandates · Color = escalation frequency/severity</p>
          </div>
          <div class="panel-actions">
            <label class="inline-field">
              Metric
              <select id="heatmap-metric">
                <option value="count">Escalation count</option>
                <option value="severity">Severity (hard breach weighted)</option>
                <option value="rate">Escalation rate</option>
              </select>
            </label>
          </div>
        </div>
        <div id="heatmap" class="heatmap" aria-label="Escalation heatmap"></div>
        <div class="drilldown">
          <h3>Drilldown</h3>
          <p class="muted" id="drilldown-caption">Click a heatmap cell to view matching records.</p>
          <div class="table-wrap">
            <table class="table" aria-label="Drilldown records table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Mandate</th>
                  <th>Procedure</th>
                  <th>Outcome</th>
                  <th>Confidence</th>
                  <th>Open</th>
                </tr>
              </thead>
              <tbody id="drilldown-rows"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>

    <footer>Read-only analytics on published judgment artifacts. No execution or portfolio actions occur here.</footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module" src="./js/visualizations.js"></script>
  </body>
</html>

